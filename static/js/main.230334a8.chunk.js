(this["webpackJsonponnx-age-group-classification"]=this["webpackJsonponnx-age-group-classification"]||[]).push([[0],{32:function(e,n,t){e.exports=t(51)},37:function(e,n,t){},51:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(22),i=t.n(o),s=(t(37),t(7)),c=t.n(s),l=t(12),u=t(11),m=t(30),g=t(23),d=t(24),p=t(28),f=t(31),v=t(25),h=t.n(v),b=t(8);function x(e,n){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(c.a.mark((function e(n,t){var a,r,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,e.prev=1,e.next=4,n.run([t]);case 4:return r=e.sent,o=new Date,i=o.getTime()-a.getTime(),s=r.values().next().value,e.abrupt("return",[s,i]);case 11:throw e.prev=11,e.t0=e.catch(1),console.error(e.t0),new Error;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var k=t(17),F=t.n(k),y=t(2),B=t.n(y);function I(e){var n=e.getImageData(0,0,e.canvas.width,e.canvas.height),t=n.data;n.width,n.height;var a=F()(new Float32Array(187500),[0,3,250,250]),r=F()(new Float32Array(t),[250,250,4]);B.a.assign(a.pick(0,0,null,null),r.pick(null,null,2)),B.a.assign(a.pick(0,1,null,null),r.pick(null,null,1)),B.a.assign(a.pick(0,2,null,null),r.pick(null,null,0)),B.a.divseq(a,255),B.a.subseq(a.pick(0,0,null,null),.485),B.a.subseq(a.pick(0,1,null,null),.456),B.a.subseq(a.pick(0,2,null,null),.406),B.a.divseq(a.pick(0,0,null,null),.229),B.a.divseq(a.pick(0,1,null,null),.224),B.a.divseq(a.pick(0,2,null,null),.225);var o=new b.Tensor(new Float32Array(187500),"float32",[1,3,250,250]);return o.data.set(a.data),o}var O=t(29);var j=t(13),D=t.n(j),E={0:["1","Adults"],1:["2","Teenagers"],2:["3","Toddlers"]};function T(e){if(console.log(e),!e||0===e.length){for(var n=[],t=0;t<5;t++)n.push({name:"-",probability:0,index:0});return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=D.a.isTypedArray(e)?Array.prototype.slice.call(e):e,a=D.a.reverse(D.a.sortBy(t.map((function(e,n){return[e,n]})),(function(e){return e[0]}))),r=D.a.take(a,n).map((function(e){var n=E[e[1]],t={id:n[0],index:parseInt(e[1],10),name:n[1].replace(/_/g," "),probability:e[0]};return console.log(t),t}));return r}(function(e){var n=Math.max.apply(Math,Object(O.a)(e)),t=e.map((function(e){return Math.exp(e-n)})).reduce((function(e,n){return e+n}));return e.map((function(e,a){return Math.exp(e-n)/t}))}(Array.prototype.slice.call(e)),5)}var S=[{text:"cat",value:"https://storage.googleapis.com/kagglesdsdata/datasets%2F805122%2F1380118%2FTest%20Data%2FTest%20Data%2FImg1001.jpg?GoogleAccessId=gcp-kaggle-com@kaggle-161607.iam.gserviceaccount.com&Expires=1599736298&Signature=PAwCgELHbNc2z2t7%2FfKDPkbuOxg4xs%2FluKTsf68mx7fQKhL4ztcYxpzfx18V1n74%2Bea0XbN%2FxIPGR5cZcabtvDjgXfJv5vdjQjlYZiBHt0LS6E6XVZ5flMDnIX4U2pCYDx5QQ1eL9o6fdXZgUyxMCjdklZs9soYAFAnsO28sc%2Bw%2B0jMdwaMLPH3NbRHu7cPsv8fEuHLcmUL5FnBPDkh6IOG8Y4v1aizCeMpTLgQaVewxx2dp9lbkqwmOa5KUP0q%2B1y%2Bm7fGDGTl0wwyNzXX2fLYqbiQCoOLIYNMtwQygcLDSJAuCs%2F0uP755ko%2Fqa7dni4F%2FPINnm%2BreqkKf1XQwPQ%3D%3D"},{text:"dog",value:"https://storage.googleapis.com/kagglesdsdata/datasets%2F805122%2F1380118%2FTest%20Data%2FTest%20Data%2FImg1020.jpg?GoogleAccessId=gcp-kaggle-com@kaggle-161607.iam.gserviceaccount.com&Expires=1599909161&Signature=YiOjFqgukVLmSOnizjJIlUEJj6IePuRB5D8PYtwOhbFu4mV669%2BmnCYwPk7Od1UcKq9HpXZd8OcoNVYy%2BiBgOi9NtqBIXELJakRnVxlPI1kEcth3O6m0IuOHfqi43uTYPehbE48yNVcO1J67LjG%2BUczNM08ixiCCLrzxdNBoS4f6Jti2%2BT4XyoFgIwKFPrutEbEVDoR4SEU%2F9e9Nm5PzmKwz9xTe77YdgiIbCsKNOaWf4tlbW8BqvD8%2FU3nF9QqouswtOFP5HiBp%2FL%2Fs7DcubZ5875VYgXCS2O00J6hYSUGgzSsuX3h1Zm3%2Ba1QCTyvg%2BTWmylJQDlXnI1Hx90Ya%2BA%3D%3D"},{text:"fox",value:"https://storage.googleapis.com/kagglesdsdata/datasets%2F805122%2F1380118%2FTest%20Data%2FTest%20Data%2FImg1064.jpg?GoogleAccessId=gcp-kaggle-com@kaggle-161607.iam.gserviceaccount.com&Expires=1599909204&Signature=A5OYyHR4EDIFQN%2FRWxCIfiSdKsUub2oXGtKSWoK7GAWcoZtIZQgQ3rhYojTHnJxHf5%2FRp7sY6HxDlACMxWhGn2Cz%2BYBL%2B2DDZZCSaQh4G%2FHZOsgWyh%2B7kj3vABKsAaulr%2B%2BJ1NcNFWXkjUXwsDQ%2FqpdE4%2FvPqhDuUDQ4fGFPDaW079xrI7TS2jFozXyEEPbnSdw997l%2BUsiielXsL7dFFaDuOpZFHXrY4dYcQxbvrMR2bHR8l%2BKTuDIfqhcHhp6zF1fhnSWB3wBaLmO319tBdIbDmBTzjdCJMsVP3ojvtSEoOzvl6oG%2FPrkAzFOlwm3TqweclAATVRM1%2Fw02SPh%2B5Q%3D%3D"},{text:"cheetah",value:"https://storage.googleapis.com/kagglesdsdata/datasets%2F805122%2F1380118%2FTest%20Data%2FTest%20Data%2FImg5336.jpg?GoogleAccessId=gcp-kaggle-com@kaggle-161607.iam.gserviceaccount.com&Expires=1599909368&Signature=pAWYK21aSSsyBnQjL3%2Bns722gBMmjlIi2ky4nl9IbkmJOf2yIpM%2BiFbTZvF46w5%2BIUEN3Hz%2FvdugeIe2dYk%2Fd0etBdnwDNJ33gVdUIlUIq4%2BQsYqRaAP%2BjqVwevqA%2F10tuZWYsCfozReQjWPaMrEiyLDRFWWlTP%2BR99eIOUVnYXMl0e%2B8QPNCbWniQm5UqJng2ltRcwS0ZZ5Vy2dVB622z5UZDY41vngIenT9H4roS%2F4rCfovUWTTYKiyr%2FqkYblJ8k2iSgd5cn5Z%2BF1csQ8RHXdNRmf3I4n6cBMJUePhsz2Xb9WHTLlIkvEIV%2BA%2F1vLzR%2B6eobTYLIdkehVfLWZxg%3D%3D"}],L=t(1),z=t(6);function A(){var e=Object(L.a)(["\n  padding: 8px 16px;\n  border-radius: 8px;\n  margin: 8px;\n  background-color: rgba(0, 0, 0, 0.85);\n  color: white;\n  text-align: center;\n  & p {\n    margin: 0;\n    font-size: 16px;\n    font-weight: bold;\n  }\n  & span {\n    margin: 0;\n    font-size: 12px;\n  }"]);return A=function(){return e},e}function Y(){var e=Object(L.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 72px;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  overflow-x: auto;\n"]);return Y=function(){return e},e}function P(){var e=Object(L.a)(["\n  background-image: url('","');\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: black;\n  width: 80px;\n  height: 80px;\n  border-radius: 4px;\n  transition: all 0.3s cubic-bezier(0.075, 0.81, 0.165, 1);\n  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.15);\n  margin: 8px;\n  cursor: pointer;\n  display: flex;\n  &:hover {\n    opacity: 1;\n  }\n  ","\n"]);return P=function(){return e},e}function C(){var e=Object(L.a)(["\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n  max-width: 720px;\n  display: flex;\n"]);return C=function(){return e},e}function q(){var e=Object(L.a)(["\n  color: white;\n  text-align: center;\n"]);return q=function(){return e},e}function R(){var e=Object(L.a)(["\n  color: white;\n  text-align: center;\n"]);return R=function(){return e},e}var M=z.a.h1(R()),Q=z.a.p(q()),H=z.a.div(C()),X=z.a.div(P(),(function(e){return e["data-background"]}),(function(e){return e["data-selected"]?"\n    opacity: 1;\n    transform: scale(1.05);\n    box-shadow: 3px 4px 8px rgba(0, 0, 0, 0.15);\n    border: 1px solid white;\n  ":"\n    opacity: 0.6;\n  "})),Z=z.a.div(Y()),U=z.a.div(A()),W=t(9);function N(){var e=Object(L.a)(["\n  color: #ffffff;\n  font-size: 20px;\n  text-indent: -9999em;\n  overflow: hidden;\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  margin: 12px auto;\n  position: relative;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation: "," 1.7s infinite ease, "," 1.7s infinite ease;\n  animation: "," 1.7s infinite ease, "," 1.7s infinite ease;\n"]);return N=function(){return e},e}function J(){var e=Object(L.a)(["\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n"]);return J=function(){return e},e}function V(){var e=Object(L.a)(["\n  0% {\n    box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;\n  }\n  5%,\n  95% {\n    box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;\n  }\n  10%,\n  59% {\n    box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em;\n  }\n  20% {\n    box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em;\n  }\n  38% {\n    box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em;\n  }\n  100% {\n    box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;\n  }\n"]);return V=function(){return e},e}var G=Object(W.b)(V()),K=Object(W.b)(J()),_=z.a.div(N(),G,K,G,K),$={sessionRunning:!1,inferenceTime:0,error:!1,output:[],modelLoading:!1,modelLoaded:!1,backendHint:"webgl",selectedImage:null},ee=function(e){Object(f.a)(t,e);var n=Object(p.a)(t);function t(){var e;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).state=Object(m.a)({},$),e.imageSize=224,e.session=new b.InferenceSession({backendHint:e.state.backendHint}),e.runModel=Object(u.a)(c.a.mark((function n(){var t,a,r,o,i,s,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=document.getElementById("input-canvas"),a=t.getContext("2d"),r=I(a),e.state.modelLoaded){n.next=9;break}return e.setState({modelLoading:!0}),n.next=8,e.session.loadModel("/Age-Group-Classifier-React/models/age_group_clf_custom_basic.onnx");case 8:e.setState({modelLoaded:!0,modelLoading:!1});case 9:return n.next=11,x(e.session,r);case 11:o=n.sent,i=Object(l.a)(o,2),s=i[0],u=i[1],s&&e.setState({output:T(s.data),sessionRunning:!1,inferenceTime:u}),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),console.warn(n.t0);case 21:case"end":return n.stop()}}),n,null,[[0,18]])}))),e}return Object(d.a)(t,[{key:"init",value:function(){this.setState($);var e=document.getElementById("input-canvas");if(e){var n=e.getContext("2d");n&&n.clearRect(0,0,n.canvas.width,n.canvas.height)}}},{key:"loadImageToCanvas",value:function(e){var n=this;e?(this.setState({sessionRunning:!0,output:[],selectedImage:e}),h()(e,(function(e){if("error"===e.type)n.setState({sessionRunning:!1,error:"Unable to load image in canvas",output:[],inferenceTime:0});else{var t=document.getElementById("input-canvas");if(t){var a=t.getContext("2d");a&&(a.drawImage(e,0,0),n.setState({error:"Something went wrong during detection",inferenceTime:0},(function(){n.runModel()})))}}}),{maxWidth:this.imageSize,maxHeight:this.imageSize,cover:!0,crop:!0,canvas:!0,crossOrigin:"Anonymous"})):this.init()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{id:"input-canvas",width:this.imageSize,height:this.imageSize}),r.a.createElement(M,{style:{color:"black"}},"ONNX Model"),r.a.createElement(Q,{style:{color:"black"}},"Click on image to predict"),r.a.createElement(H,null,S.map((function(n){return r.a.createElement(X,{"data-selected":e.state.selectedImage===n.value,"data-background":n.value,key:n.value,onClick:function(){return e.loadImageToCanvas(n.value)}})}))),r.a.createElement(Q,null,this.state.modelLoading&&"Loading Model, this make take a bit longer please hold"," ",this.state.sessionRunning&&"Processing Image"),r.a.createElement(Z,null,this.state.output?this.state.output.map((function(e,n){return r.a.createElement(U,{key:e.id},r.a.createElement("p",null,e.name),r.a.createElement("span",null,(100*e.probability).toFixed(2),"%"))})):null,this.state.sessionRunning&&r.a.createElement(_,null)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.230334a8.chunk.js.map